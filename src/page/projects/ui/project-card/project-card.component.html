<article
  pRipple
  (click)="onCardClick()"
  [class.cursor-not-allowed]="isLoading()"
  [class.opacity-50]="isLoading()"
  class="group relative cursor-pointer overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm transition-all hover:border-sky-300 hover:shadow-lg hover:shadow-sky-500/10">

  <!-- Status Indicator (Top Border) -->
  <div
    class="absolute left-0 right-0 top-0 h-1"
    [ngClass]="{
    'bg-sky-400': project().status === ProjectStatusEnum.PLANNED,
    'bg-sky-500': project().status === ProjectStatusEnum.IN_PROGRESS,
    'bg-cyan-500': project().status === ProjectStatusEnum.COMPLETED,
    'bg-gray-400': project().status === ProjectStatusEnum.ON_HOLD,
    'bg-gray-500': project().status === ProjectStatusEnum.CANCELLED
  }">
  </div>

  <div class="p-6">

    <!-- Header: Code & Status -->
    <div class="mb-4 flex items-start justify-between gap-3">
      <div class="flex-1">
        <p class="font-mono text-xs font-medium text-gray-500">
          {{ project().code }}
        </p>
        <h3 class="mt-1 text-lg font-semibold text-gray-900 transition-colors group-hover:text-sky-600">
          {{ project().name }}
        </h3>
      </div>

      <!-- Status Badge -->
      <span
        class="inline-flex shrink-0 items-center gap-1.5 rounded-full border px-3 py-1 text-xs font-semibold transition-all"
        [ngClass]="getStatusColor(project().status)">
        <i class="pi text-xs" [ngClass]="getStatusIcon(project().status)"></i>
        {{ getStatusLabel(project().status) }}
      </span>
    </div>

    <!-- Client Name -->
    <div class="mb-4">
      <div class="flex items-center gap-2 text-sm text-gray-600">
        <i class="pi pi-building text-xs text-gray-400"></i>
        <span class="font-medium">{{ project().clientName }}</span>
      </div>
    </div>

    <!-- Description -->
    @if (project().description) {
      <p class="mb-4 line-clamp-2 text-sm text-gray-600">
        {{ project().description }}
      </p>
    } @else {
      <p class="mb-4 text-sm italic text-gray-400">
        Sin descripci√≥n
      </p>
    }

    <!-- Equipment Types -->
    <div class="mb-4">
      <p class="mb-2 text-xs font-medium uppercase tracking-wider text-gray-500">
        Equipos Permitidos
      </p>
      <div class="flex flex-wrap gap-2">
        @for (equipmentType of project().allowedEquipmentTypes; track equipmentType) {
          <span
            class="inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-xs font-semibold transition-all"
            [ngClass]="getEquipmentTypeBadgeColor(equipmentType)">
            <span class="text-sm {{getEquipmentTypeIcon(equipmentType)}}"></span>
            {{ getEquipmentTypeLabel(equipmentType) }}
          </span>
        }
      </div>
    </div>

    <!-- Footer: Action Hint -->
    <div class="flex items-center justify-end border-t border-gray-100 pt-4">
      <span class="flex items-center gap-2 text-xs font-medium text-sky-600 transition-all group-hover:gap-3 group-hover:text-sky-700">
        <span>Ver detalles</span>
        <i class="pi pi-arrow-right text-xs"></i>
      </span>
    </div>

  </div>

  <!-- Hover Overlay -->
  <div class="pointer-events-none absolute inset-0 bg-gradient-to-br from-sky-500/0 to-cyan-500/0 opacity-0 transition-opacity group-hover:opacity-5"></div>

</article>
