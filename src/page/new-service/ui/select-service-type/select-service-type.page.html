<main class="w-full h-full flex flex-col p-6 bg-surface-50">

  <!-- Header -->
  <div class="mb-6">
    <h1 class="text-2xl font-bold text-surface-900 mb-2">Crear Nuevo Servicio</h1>
    <p class="text-surface-600">
      Paso 1 de 3: Selecciona el tipo de servicio que deseas crear
    </p>

    <!-- Context info -->
    @if (contextStore.hasContext()) {
      <div class="mt-3 flex items-center gap-2 text-sm text-surface-500">
        <i class="pi pi-building"></i>
        <span>{{ contextStore.client()?.name }}</span>
        <i class="pi pi-chevron-right text-xs"></i>
        <span>{{ contextStore.project()?.name }}</span>
      </div>
    }
  </div>

  <!-- Service Type Cards -->
  <div class="flex-1 flex flex-col gap-4 pb-6 overflow-y-auto">
    @for (service of services; track service.id) {
      <button
        (click)="selectService(service.id)"
        [ngClass]="{
          'ring-4 ring-sky-500 -translate-y-2 shadow-xl': serviceSelected() === service.id,
          'hover:-translate-y-1 hover:shadow-lg': serviceSelected() !== service.id
        }"
        class="relative h-32 rounded-xl overflow-hidden transition-all duration-300 cursor-pointer group">

        <!-- Background Image with Overlay -->
        <div
          [style.background-image]="'url(' + service.imageSrc + ')'"
          class="absolute inset-0 bg-cover bg-center">
          <div class="absolute inset-0 bg-gradient-to-r from-black/70 to-black/40"></div>
        </div>

        <!-- Content -->
        <div class="relative h-full flex items-center px-6 z-10">
          <div class="flex items-center gap-4 w-full">
            <!-- Icon -->
            <div [ngClass]="{
                   'bg-sky-500 ring-4 ring-sky-300': serviceSelected() === service.id,
                   'bg-white/20 group-hover:bg-white/30': serviceSelected() !== service.id
                 }"
                 class="flex items-center justify-center w-16 h-16 rounded-full transition-all duration-300">
              <i [class]="'pi ' + service.icon + ' text-2xl text-white'"></i>
            </div>

            <!-- Text -->
            <div class="flex-1 text-left">
              <h3 class="text-xl font-bold text-white mb-1">{{ service.name }}</h3>
              <p class="text-sm text-white/90 line-clamp-2">{{ service.description }}</p>
            </div>

            <!-- Check Icon -->
            @if (serviceSelected() === service.id) {
              <div class="flex items-center justify-center w-10 h-10 rounded-full bg-sky-500 animate-pulse">
                <i class="pi pi-check text-white text-xl font-bold"></i>
              </div>
            }
          </div>
        </div>
      </button>
    }
  </div>

  <!-- Action Buttons -->
  <div class="flex justify-center gap-4 pt-4 border-t border-surface-200">
    <button
      pButton
      pButtonLabel="Anterior"
      pButtonIcon="pi pi-arrow-left"
      (click)="goBack()"
      [outlined]="true"
      severity="secondary"
      class="w-32">
    </button>
    <button
      pButton
      pButtonLabel="Siguiente"
      pButtonIcon="pi pi-arrow-right"
      (click)="navigateToEquipment()"
      [disabled]="!isServiceSelected()"
      class="w-32">
    </button>
  </div>

</main>
