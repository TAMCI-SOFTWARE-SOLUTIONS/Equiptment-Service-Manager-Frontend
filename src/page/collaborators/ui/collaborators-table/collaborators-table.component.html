<div class="overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm">

  <!-- Table -->
  <div class="overflow-x-auto">
    <table class="w-full">
      <thead class="bg-gray-50">
      <tr>
        <th class="px-4 py-3 text-left">
          <button
            type="button"
            (click)="onSort('name')"
            class="flex items-center gap-2 text-xs font-medium uppercase tracking-wider text-gray-600 transition-colors hover:text-gray-900">
            <span>Colaborador</span>
            <i class="pi text-xs" [ngClass]="getSortIcon('name')"></i>
          </button>
        </th>
        <th class="px-4 py-3 text-left">
          <button
            type="button"
            (click)="onSort('email')"
            class="flex items-center gap-2 text-xs font-medium uppercase tracking-wider text-gray-600 transition-colors hover:text-gray-900">
            <span>Email</span>
            <i class="pi text-xs" [ngClass]="getSortIcon('email')"></i>
          </button>
        </th>
        <th class="px-4 py-3 text-left">
          <button
            type="button"
            (click)="onSort('document')"
            class="flex items-center gap-2 text-xs font-medium uppercase tracking-wider text-gray-600 transition-colors hover:text-gray-900">
            <span>Documento</span>
            <i class="pi text-xs" [ngClass]="getSortIcon('document')"></i>
          </button>
        </th>
        <th class="px-4 py-3 text-left">
          <span class="text-xs font-medium uppercase tracking-wider text-gray-600">Género</span>
        </th>
        <th class="px-4 py-3 text-right">
          <span class="text-xs font-medium uppercase tracking-wider text-gray-600">Acciones</span>
        </th>
      </tr>
      </thead>

      <tbody class="divide-y divide-gray-200">
        @for (collaborator of store.paginatedCollaborators(); track collaborator.id) {
          <tr class="transition-colors hover:bg-gray-50">

            <!-- Collaborator (Photo + Name) -->
            <td class="px-4 py-3">
              <div class="flex items-center gap-3">
                @if (collaborator.photoUrl) {
                  <img
                    [src]="collaborator.photoUrl"
                    [alt]="collaborator.fullName"
                    class="h-10 w-10 rounded-full border-2 border-white object-cover shadow-sm">
                } @else {
                  <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-sky-400 to-cyan-500 text-sm font-semibold text-white shadow-sm">
                    {{ collaborator.initials }}
                  </div>
                }
                <div class="min-w-0 flex-1">
                  <p class="truncate text-sm font-semibold text-gray-900">
                    {{ collaborator.fullName }}
                  </p>
                </div>
              </div>
            </td>

            <!-- Email -->
            <td class="px-4 py-3">
              <p class="truncate text-sm text-gray-600">
                {{ collaborator.email }}
              </p>
            </td>

            <!-- Document -->
            <td class="px-4 py-3">
              <div>
                <p class="text-sm font-medium text-gray-900">
                  {{ collaborator.identityDocumentNumber }}
                </p>
                <p class="text-xs text-gray-500">
                  {{ store.getDocumentTypeLabel(collaborator.identityDocumentType) }}
                </p>
              </div>
            </td>

            <!-- Gender -->
            <td class="px-4 py-3">
              <span class="inline-flex items-center gap-1.5 rounded-full px-2.5 py-0.5 text-xs font-medium"
                    [ngClass]="{
                      'bg-blue-100 text-blue-700': collaborator.gender === GenderEnum.MALE,
                      'bg-pink-100 text-pink-700': collaborator.gender === GenderEnum.FEMALE
                    }">
                <i class="pi"
                   [ngClass]="{
                     'pi-mars': collaborator.gender === GenderEnum.MALE,
                     'pi-venus': collaborator.gender === GenderEnum.FEMALE
                   }"></i>
                {{ store.getGenderLabel(collaborator.gender) }}
              </span>
            </td>

            <!-- Actions -->
            <td class="px-4 py-3 text-right">
              <button
                pRipple
                type="button"
                (click)="onViewCollaborator(collaborator.id)"
                class="inline-flex items-center gap-1.5 rounded-lg bg-sky-500 px-3 py-1.5 text-xs font-semibold text-white transition-all hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-1">
                <i class="pi pi-eye"></i>
                <span>Ver</span>
              </button>
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="5" class="px-4 py-12 text-center">
              <div class="flex flex-col items-center justify-center">
                <i class="pi pi-users mb-3 text-4xl text-gray-300"></i>
                <p class="text-sm font-medium text-gray-900">
                  No se encontraron colaboradores
                </p>
                <p class="mt-1 text-xs text-gray-500">
                  Intenta ajustar los filtros de búsqueda
                </p>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  @if (store.totalPages() > 1) {
    <div class="flex items-center justify-between border-t border-gray-200 bg-gray-50 px-4 py-3">

      <!-- Info -->
      <div class="text-sm text-gray-600">
        Mostrando
        <span class="font-medium">{{ store.paginationInfo().start }}</span>
        -
        <span class="font-medium">{{ store.paginationInfo().end }}</span>
        de
        <span class="font-medium">{{ store.paginationInfo().total }}</span>
      </div>

      <!-- Pagination Controls -->
      <div class="flex items-center gap-2">
        <button
          pRipple
          type="button"
          (click)="store.previousPage()"
          [disabled]="store.currentPage() === 1"
          class="flex h-8 w-8 items-center justify-center rounded-lg border border-gray-300 bg-white text-sm text-gray-700 transition-all hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50">
          <i class="pi pi-chevron-left text-xs"></i>
        </button>

        <!-- Page Numbers -->
        @for (_ of [].constructor(store.totalPages()); track $index) {
          <button
            pRipple
            type="button"
            (click)="store.setPage($index + 1)"
            class="flex h-8 w-8 items-center justify-center rounded-lg text-sm font-medium transition-all"
            [ngClass]="{
              'bg-sky-500 text-white': store.currentPage() === $index + 1,
              'border border-gray-300 bg-white text-gray-700 hover:bg-gray-50': store.currentPage() !== $index + 1
            }">
            {{ $index + 1 }}
          </button>
        }

        <button
          pRipple
          type="button"
          (click)="store.nextPage()"
          [disabled]="store.currentPage() === store.totalPages()"
          class="flex h-8 w-8 items-center justify-center rounded-lg border border-gray-300 bg-white text-sm text-gray-700 transition-all hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50">
          <i class="pi pi-chevron-right text-xs"></i>
        </button>
      </div>

    </div>
  }

</div>
